# 学习模式差异化设计

## 概述

Bunny Words 现在实现了两种不同类型的学习模式，每种模式对 SRS（间隔重复学习系统）的影响不同。

## 学习模式分类

### 1. 主动学习模式：记忆卡片 (Flashcard)

#### 特点
- **学习对象**：智能筛选，只显示需要复习的单词
- **用户行为**：主动评分（忘记/模糊/认识/熟练）
- **SRS 影响**：根据用户评分精确调整复习计划

#### 工作流程
1. **首次学习**：显示 List 中的所有单词（例如 50 个）
2. **后续复习**：只显示到期需要复习的单词
3. **评分系统**：
   - 忘记 (Again) → 1 分钟后复习
   - 模糊 (Hard) → 10 分钟后复习
   - 认识 (Good) → 1 天后复习
   - 熟练 (Easy) → 4 天后复习

#### 使用场景
- 系统化学习新单词
- 定期复习已学单词
- 长期记忆巩固

---

### 2. 测试模式：听写、选择、连连看

#### 特点
- **学习对象**：始终显示 List 中的所有单词
- **用户行为**：被动测试（做对/做错）
- **SRS 影响**：根据测试结果调整复习优先级

#### 工作流程

##### 做错时的处理
当用户在测试中做错某个单词时，系统会：

1. **首次做错**
   - 标记为需要复习
   - 设置 1 小时后复习
   - 降低难度系数（表示这个词比较难）

2. **重复做错**
   - 进一步提升优先级
   - 缩短复习间隔至 10 分钟
   - 继续降低难度系数

3. **之前掌握良好但现在做错**
   - 设置 30 分钟后复习
   - 适度降低难度系数

##### 做对时的处理
- 保持原有复习计划不变
- 或轻微延后复习时间（表示掌握良好）
- 不修改难度系数

#### 使用场景
- 全面测试单词掌握情况
- 发现薄弱环节
- 趣味性学习

---

## 设计理念

### 为什么测试模式显示所有单词？

1. **全面评估**：用户需要知道自己对整个 List 的掌握情况
2. **发现盲点**：可能有些单词用户以为掌握了，但测试时才发现不熟
3. **趣味性**：连连看等游戏化模式需要足够的单词量才有趣
4. **灵活性**：用户可以随时进行自我测试，不受复习计划限制

### 为什么测试错误会影响复习计划？

1. **智能反馈**：做错说明用户对该单词不够熟悉
2. **动态调整**：根据实际表现调整学习计划
3. **提升效率**：确保薄弱单词得到更多关注
4. **科学记忆**：符合艾宾浩斯遗忘曲线理论

---

## 实际应用示例

### 场景 1：新手学习流程

1. **Day 1 上午**
   - 用户通过"记忆卡片"学习 List 1 的 50 个单词
   - 对每个单词进行评分
   - 系统记录：20个"认识"，15个"模糊"，10个"忘记"，5个"熟练"

2. **Day 1 下午**
   - 用户想测试一下，点击"听写大师"
   - 系统显示所有 50 个单词进行听写
   - 结果：40 个正确，10 个错误
   - 系统自动将这 10 个错误的单词标记为"1小时后复习"

3. **Day 1 晚上**
   - 用户再次进入"记忆卡片"
   - 系统显示：之前的 10 个"忘记" + 听写错误的 10 个 = 20 个需要复习的单词
   - 用户重点复习这些薄弱单词

### 场景 2：巩固学习流程

1. **Day 7**
   - 用户已经学完 List 1，大部分单词掌握良好
   - 点击"词义选择"进行自测
   - 系统显示所有 50 个单词
   - 结果：3 个单词选错了

2. **系统自动处理**
   - 这 3 个单词被标记为需要复习
   - 设置 30 分钟后复习（因为之前掌握较好）
   - 其他 47 个单词保持原有复习计划

3. **30 分钟后**
   - 用户进入"记忆卡片"
   - 只显示这 3 个需要复习的单词
   - 用户重新评分，巩固记忆

---

## 技术实现

### 核心函数

```typescript
// 处理测试模式中的错误
markWordForReview(
  progress: ListProgress,
  wordId: string | number,
  isCorrect: boolean
): ListProgress
```

### 调用位置

1. **听写大师** (`handleDictationSubmit`)
   - 提交答案时判断正误
   - 调用 `markWordForReview`

2. **词义选择** (`handleChoiceSubmit`)
   - 选择选项时判断正误
   - 调用 `markWordForReview`

3. **连连看** (`handleMatchingClick`)
   - 匹配成功/失败时
   - 调用 `markWordForReview`

---

## 优势总结

### 对用户的好处

1. **灵活性**：可以随时进行全面测试
2. **针对性**：系统自动识别薄弱环节
3. **高效性**：重点复习不熟悉的单词
4. **趣味性**：游戏化测试不枯燥

### 对学习效果的提升

1. **及时反馈**：立即发现问题单词
2. **动态调整**：学习计划实时优化
3. **科学记忆**：符合记忆规律
4. **全面覆盖**：不遗漏任何单词

---

## 未来优化方向

1. **错误分析**：统计最容易出错的单词类型
2. **学习报告**：生成详细的学习分析报告
3. **智能推荐**：根据错误模式推荐学习策略
4. **成就系统**：鼓励用户完成测试挑战
